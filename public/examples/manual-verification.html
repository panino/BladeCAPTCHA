<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Verificación CAPTCHA manual</title>
    <link rel="stylesheet" href="../css/captcha.css">
	<style>
	  :root {
		--header-height: 60px;
	  }
	  html {
		scroll-padding-top: var(--header-height);
	  }
	  .sticky-header {
		position: sticky;
		top: 0;
		background-color: #1e1e1e;
		color: #f5f5f5;
		height: var(--header-height);
		display: flex;
		align-items: center;
		padding: 0 1rem;
		z-index: 1000;
		border-bottom: 1px solid #444;
	  }
	 .sticky-header nav {
		display: flex;
		justify-content: space-between;
		width: 100%;
		max-width: 1024px;
		margin: 0 auto;
	  }
	  .sticky-header .logo {
		font-weight: bold;
		font-size: 1.2rem;
		text-decoration: none;
		color: inherit;
	  }
	  .sticky-header .nav-links {
		list-style: none;
		display: flex;
		gap: 1rem;
		margin: 0;
		padding: 0;
	  }
	   .sticky-header .nav-links a {
		color: inherit;
		text-decoration: none;
		font-weight: 500;
	  }
	   .sticky-header .nav-links a:hover,
	   .sticky-header .nav-links a:focus {
		text-decoration: underline;
	  }
	  body{
		width:100%;
		padding:0!important;
		margin:0 auto;
	  }
	  main {
		margin:auto;
		margin-top: var(--header-height);
		padding: 0 2rem 2rem 2rem;
		max-width: 600px;
		padding-bottom:20px;
		
	  }
	  footer {
		text-align: center;
		margin-top: 4rem;
		color: #999;
		font-size: 0.9rem;
		position: fixed;
		bottom:0;
		left:0;
		background:#fff;
		width:100%;
	  }
	 
	</style>
</head>
<body>
<header class="sticky-header">
  <nav>
    <a href="../../../landing/index.html" class="logo" aria-label="BladeCAPTCHA home">🐢 BladeCAPTCHA</a>
    <ul class="nav-links">
      <li><a href="../../../landing/index.html">Inicio</a></li>
      <li><a href="../../../landing/documentacion.html">Documentación</a></li>
      <li><a href="https://github.com/panino/BladeCAPTCHA" target="_blank" rel="noopener noreferrer">GitHub</a></li>
      <li><a href="../../../landing/en" lang="en" hreflang="en">English</a></li>
    </ul>
  </nav>
</header>
<main>
	<form id="pp">
    <h1>Verificación CAPTCHA</h1>
    <p id="captchaInstructions">Presiona el botón para resolver un desafío y verificar que no eres un robot.</p>

    <button id="verifyButton" aria-describedby="captchaInstructions">Verificar</button>
    <progress id="progreso" value="0" max="100" aria-label="Progreso de resolución del CAPTCHA">0%</progress>
    <div id="status" role="status" aria-live="polite"></div>
</form>
    <script type="module">
	import { initCaptcha } from '../js/captcha.min.js';
	(async () => {
		try {
			await initCaptcha(
				{
					mode : 'manualHandling',
					apiBaseUrl : '../php',
					verifyButtonSelector : '#verifyButton',
					statusSelector : '#status',
					onSuccess : (token) => alert("✅ Verificación exitosa, token: " + token),
					onError : (err) => alert("❌ Error: " + err.message),
					onStart : () => console.log("Procesando..."),
					onEnd : () => console.log("Proceso terminado"),
					onProgress : (p) => {
						let prog = document.querySelector('#progreso');
						prog.style.visibility = p ? 'visible' : 'hidden';
						prog.value = p;
						if (p === 100) setTimeout(() => prog.style.visibility = 'hidden', 100);
					}
				}
			);
		} catch (err) {
			console.error(err || err.message);
		}
	})();
    </script>
	<footer>
     <p>BladeCAPTCHA · Documentación técnica · MIT License</p>
	</main>
</body>
</html>