self.addEventListener("message",async e=>{const{challenge:t,difficulty:s,loguear:o,progress:a}=e.data,n="0".repeat(s);let r=0;const i=new TextEncoder,c=async e=>{const t=i.encode(e),s=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(s)).map(e=>e.toString(16).padStart(2,"0")).join("")},l=Date.now(),d=12e3+3800*s;for(;;){if((await c(t+r)).startsWith(n))return void self.postMessage({nonce:r});if(r++,o&&r%1e4==0&&self.postMessage({log:`Calculando... (${r} intentos)`}),a&&r%100==0&&self.postMessage({perc:(100*(Date.now()-l)/d).toFixed(2)}),Date.now()-l>d)return void self.postMessage({error:"Tiempo de c√°lculo excedido"})}});